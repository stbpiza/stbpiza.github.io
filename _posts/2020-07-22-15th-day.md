---
layout: post
title: "15th day"
author: "stbpiza"
---

오늘의 과제는 계산기를 만드는 것이었다.

*/%+- 다섯가지 연산을 해주는 계산기를 

함수를 써서 만드는 것이 조건이고 나머지는 자유였다.

입력값을 [숫자] [연산] [숫자] 방식으로 3개만 받는 방식과

그냥 보통 계산기처럼 긴 수식으로 받는법 중 고민하다가

더 어려운 방법으로 도전해 보기로 했다.

긴 수식으로 받으면 사칙연산 우선순위에 따라 계산해주어야 하는 문제가 있다.

ex) 5+5*1-6/2 = 5+5-3 = 7

곱하기와 나누기 먼저 하고 더하기 빼기는 나중에 해줘야 한다.

그래서 처음 떠오른 생각은 홀수 자리는 숫자 짝수 자리는 연산기호이지 않을까?

수식을 String 하나로 받아서 홀수랑 짝수를 따로 쪼개볼까? 였는데

숫자들을 리스트에 넣고 기호들을 리스트에 넣고 맞는 짝을 찾아 꺼내서 계산하고 다시 리스트에 넣고

하는 방식을 구현하지 못할 것 같아서 포기했다. 또한 숫자가 10을 넘어가면 홀짝 방식도 깨진다.

그래서 다시 생각한 방식은 for문으로 스트링[0]부터 스트링[끝]까지 연산기호를 찾고,

연산기호를 찾으면 앞 뒤에 있는 숫자를 변수에 넣어서 [앞숫자 연산기호 뒷숫자] 를 계산하고, 

[]범위에 있던 내용을 [계산결과값] 으로 치환해버리는 방법이었다.

연산기호 순서별로 for문을 돌리면 식에 모든 곱하기 먼저 다 계산하고,

다음 나누기 다음 나머지 다음 더하기 다음 빼기 순서가 가능하다.

그러면 어떤 식이 들어오던간에 최종 결과값 숫자 하나만 남을때까지 사칙연산 순서에 맞게 계산이 진행된다.

여기서 앞뒤의 숫자를 인식하는 방법도 for문을 돌렸다.

5+5*1-6/2
012345678

*탐지가 먼저 돌면서 *를 찾으면 해당 자리가 3번인걸 이용해서

2->0 방향으로 한자리씩 숫자인지 아닌지 찾고 숫자면 변수에 String으로 추가하고 연산기호면 멈춘다.

String으로 하는 이유는 그래야 10 이상의 숫자도 온전히 받아준다.

1-120*51+9 라면 0 2 1 순서로 찾는데, 이걸 String 더하기로 0 -> 20 -> 120 처럼 앞자리에 더해주면 된다.

연산기호 뒷숫자는 순서대로 뒤에 더하면 된다.

그러나 이 부분에서 여러 문제가 발생했다.

자바에서는 값 손실 없이 계산하려면 double 형식으로 계산해야하는데, 그러면 소수점이 생긴다.

즉 숫자만 찾으면 .을 만나면 멈춘다.

그래서 .을 찾아도 숫자처럼 진행하도록 했다. 덕분에 맨 처음 입력할때 소수점을 넣을 수 있게 되었다.

그리고 -의 경우도 앞에 숫자가 있는 경우에는 문제없지만, -10*5+8 같은 경우 마이너스 계산할 차례가 되면

- 앞에 숫자가 없으므로 에러가 난다.

그래서 -도 인식해주고, -찾는 for문에서는 -가 0번자리에 있으면 continue로 넘기도록 했다.

이렇게 코드를 다 짜니 잘 돌아갔다.

그래서 이값 저값 다 넣어보다가 오류가 뜨는 경우를 찾았는데,

1-5+20 같은 경우였다.

+먼저 계산하기 때문에 -5+20이 15가 된다.

앞에 있던 -가 양수로 되면서 그냥 사라져버리는 것이다.

그러면 115 가 되면서 계산이 끝난다.

그래서 더하기 계산시 앞숫자가 음수이고, 결과값이 양수라면 숫자 앞에 +를 추가해주는 기능을 넣었다.

그랬더니 오류는 없지만 마지막 결과값이 +10 으로 나오는 경우가 생겼다.

그래서 최종 결과값에 +가 붙어있으면 지우는 작업도 넣었다.

이렇게 해서 어느정도 사칙연산은 잘 돌아가는 코드를 짰는데, 문제는 함수(메소드)를 쓰지 않았다.

똑같은 for문을 *버전 /버전 %버전 +버전 -버전 총 5개를 써놔서 중복되는 부분이 많았다.

그래서 새로 메소드를 만들어서 중복되는 부분을 넣어두는 작업을 했는데,

변수들을 메소드에서 메소드로 옮기는 과정에서 여러 문제들이 나와서 

돌아는 가는데 아직도 중복코드가 많은 상태로 끝냈다.

시간이 늦어서 이상태로 제출만 하고 내일 마무리 해야겠다.

--------------------------------
-오늘의 발전<br>
(java)<br>
메소드
